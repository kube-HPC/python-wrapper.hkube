language: python
stages:
  - test
  - Coverage
  - Github
  - Deploy
services:
  - docker
jobs:
  fast_finish: true
  include:
    - python: 2.7
    - python: 3.4
    - python: 3.5
    - python: 3.6
    - python: 3.7
    - python: 3.8
    - stage: test
      script: ./tools/ci/tests.sh

    - stage: Coverage
      python: 3.7
      script: ./tools/ci/coverage.sh

    - stage: Github
      python: 3.7
      script: ./tools/ci/github.sh

    - stage: Deploy
      python: 3.7
      script: echo "Starting Pypi deploy"
      deploy:
        provider: pypi
        username: ${PYPI_USER}
        password: ${PYPI_PASSWORD}
        on:
          branch: master
